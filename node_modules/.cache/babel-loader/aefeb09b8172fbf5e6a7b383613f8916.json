{"ast":null,"code":"var _jsxFileName = \"/Users/softnotions/Desktop/poumki/client/src/image/Image.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Draw } from \"./Draw\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Image = () => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [data, setData] = useState(\"\");\n  const [image, setImage] = useState(null);\n\n  const sendRequest = async () => {\n    const res = await axios.get(\"http://localhost:3001/s3url\").catch(err => console.log(err));\n    const data = await res.data; // console.log(data.url);\n\n    setData(data.url);\n    return data;\n  };\n\n  useEffect(() => {\n    sendRequest();\n  }, []);\n\n  const fileSelectorHandler = event => {\n    setSelectedFile(event.target.files[0]);\n    console.log(event.target.files[0]);\n\n    if (event.target.files && event.target.files[0]) {\n      setImage(URL.createObjectURL(event.target.files[0]));\n    }\n  };\n\n  const FileUploadHandler = async () => {\n    const file = selectedFile;\n\n    if (data !== \"\") {\n      const upload = async () => {\n        const res = await axios.put(data, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          },\n          body: file\n        });\n        alert(\"Photo uploaded to S3\");\n      };\n\n      upload();\n      const imageUrl = data.split(\"?\")[0];\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-div\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selection-div\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control\",\n          type: \"file\",\n          id: \"imageInput\",\n          accept: \"image/*\",\n          onChange: fileSelectorHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-display mt-2\",\n      children: image && /*#__PURE__*/_jsxDEV(Draw, {\n        data: image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 53\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Image, \"nk7jViZx3D7ShLadpq/T7828spw=\");\n\n_c = Image;\n\nvar _c;\n\n$RefreshReg$(_c, \"Image\");","map":{"version":3,"names":["useState","useEffect","axios","Draw","Image","selectedFile","setSelectedFile","data","setData","image","setImage","sendRequest","res","get","catch","err","console","log","url","fileSelectorHandler","event","target","files","URL","createObjectURL","FileUploadHandler","file","upload","put","method","headers","body","alert","imageUrl","split"],"sources":["/Users/softnotions/Desktop/poumki/client/src/image/Image.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Draw } from \"./Draw\";\n\nexport const Image = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [data, setData] = useState(\"\");\n  const [image, setImage] = useState(null);\n\n  const sendRequest = async () => {\n    const res = await axios\n      .get(\"http://localhost:3001/s3url\")\n      .catch((err) => console.log(err));\n    const data = await res.data;\n    // console.log(data.url);\n    setData(data.url);\n    return data;\n  };\n\n  useEffect(() => {\n    sendRequest();\n  }, []);\n\n  const fileSelectorHandler = (event) => {\n    setSelectedFile(event.target.files[0]);\n    console.log(event.target.files[0]);\n    if (event.target.files && event.target.files[0]) {\n      setImage(URL.createObjectURL(event.target.files[0]));\n    }\n  };\n\n  const FileUploadHandler = async () => {\n\n    const file = selectedFile;\n\n    if (data !== \"\") {\n      const upload = async () => {\n        const res = await axios.put(data, {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n          body: file,\n        });\n        alert(\"Photo uploaded to S3\");\n      };\n      upload();\n      const imageUrl = data.split(\"?\")[0];\n    }\n\n  };\n\n  return (\n    <div className=\"image-div\">\n      <div className=\"selection-div\">\n        <div>\n          <input\n            className=\"form-control\"\n            type=\"file\"\n            id=\"imageInput\"\n            accept=\"image/*\"\n            onChange={fileSelectorHandler}\n          />\n        </div>\n        {/* <div className=\"right-div\">\n          <button onClick={FileUploadHandler}>Upload</button>\n          <a href={image} download={image}>\n            <button>Download</button>\n          </a>\n        </div> */}\n      </div>\n\n      <div className=\"image-display mt-2\">{image && <Draw data={image} />}</div>\n    </div>\n  );\n};"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,QAArB;;AAEA,OAAO,MAAMC,KAAK,GAAG,MAAM;EAAA;;EACzB,MAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAAC,IAAD,CAAhD;EACA,MAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,IAAD,CAAlC;;EAEA,MAAMW,WAAW,GAAG,YAAY;IAC9B,MAAMC,GAAG,GAAG,MAAMV,KAAK,CACpBW,GADe,CACX,6BADW,EAEfC,KAFe,CAERC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAFA,CAAlB;IAGA,MAAMR,IAAI,GAAG,MAAMK,GAAG,CAACL,IAAvB,CAJ8B,CAK9B;;IACAC,OAAO,CAACD,IAAI,CAACW,GAAN,CAAP;IACA,OAAOX,IAAP;EACD,CARD;;EAUAN,SAAS,CAAC,MAAM;IACdU,WAAW;EACZ,CAFQ,EAEN,EAFM,CAAT;;EAIA,MAAMQ,mBAAmB,GAAIC,KAAD,IAAW;IACrCd,eAAe,CAACc,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAf;IACAN,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAZ;;IACA,IAAIF,KAAK,CAACC,MAAN,CAAaC,KAAb,IAAsBF,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAA1B,EAAiD;MAC/CZ,QAAQ,CAACa,GAAG,CAACC,eAAJ,CAAoBJ,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAApB,CAAD,CAAR;IACD;EACF,CAND;;EAQA,MAAMG,iBAAiB,GAAG,YAAY;IAEpC,MAAMC,IAAI,GAAGrB,YAAb;;IAEA,IAAIE,IAAI,KAAK,EAAb,EAAiB;MACf,MAAMoB,MAAM,GAAG,YAAY;QACzB,MAAMf,GAAG,GAAG,MAAMV,KAAK,CAAC0B,GAAN,CAAUrB,IAAV,EAAgB;UAChCsB,MAAM,EAAE,KADwB;UAEhCC,OAAO,EAAE;YACP,gBAAgB;UADT,CAFuB;UAKhCC,IAAI,EAAEL;QAL0B,CAAhB,CAAlB;QAOAM,KAAK,CAAC,sBAAD,CAAL;MACD,CATD;;MAUAL,MAAM;MACN,MAAMM,QAAQ,GAAG1B,IAAI,CAAC2B,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAjB;IACD;EAEF,CAnBD;;EAqBA,oBACE;IAAK,SAAS,EAAC,WAAf;IAAA,wBACE;MAAK,SAAS,EAAC,eAAf;MAAA,uBACE;QAAA,uBACE;UACE,SAAS,EAAC,cADZ;UAEE,IAAI,EAAC,MAFP;UAGE,EAAE,EAAC,YAHL;UAIE,MAAM,EAAC,SAJT;UAKE,QAAQ,EAAEf;QALZ;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF,eAmBE;MAAK,SAAS,EAAC,oBAAf;MAAA,UAAqCV,KAAK,iBAAI,QAAC,IAAD;QAAM,IAAI,EAAEA;MAAZ;QAAA;QAAA;QAAA;MAAA;IAA9C;MAAA;MAAA;MAAA;IAAA,QAnBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuBD,CAvEM;;GAAML,K;;KAAAA,K"},"metadata":{},"sourceType":"module"}